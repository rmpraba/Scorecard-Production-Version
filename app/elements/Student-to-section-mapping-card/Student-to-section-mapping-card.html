<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="Student-to-section-mapping-card">  
  <template>
    <style>
      :host {
        display: block;
      }
    </style>    
    
    <div>
      <CENTER>
        <h3><b>Student To Subject mMapping</b></h3>
      </CENTER>
    </div>

    <div class="outercard">
        <table>
          <div>   

          <div class="catcard">
            <label>School Type</label>
            <template is="dom-repeat" items="{{studentsectionarr}}" as="view">
              <Student-to-section-mapping-item-card empschooltypeids="{{view.school_type_name}}" empschoolnames="{{view.school_type_id}}" id="STTYP{{view.school_type_id}}">
                </Student-to-section-mapping-item-card>
            </template>
          </div>  

            <div class="newcard">
              <paper-dropdown-menu  label="select the grade">
                <paper-menu id="empgradeid" class="dropdown-content"   on-iron-select="fnselectgrade">
                  <template is="dom-repeat" items="{{setgrade}}">
                    <paper-item value="{{item.grade_id}}">{{item.grade_name}}</paper-item>
                  </template>    
                </paper-menu>
              </paper-dropdown-menu>

          <paper-dropdown-menu  label="select the Section">
                <paper-menu id="employeeidzzzzzz" class="dropdown-content"   on-iron-select="fnemployeename">
                  <template is="dom-repeat" items="{{sectionarr}}">
                    <paper-item value="{{item.class_id}}">{{item.section_id}}</paper-item>
                  </template>    
                </paper-menu>
          </paper-dropdown-menu>
                  <template is="dom-repeat" items="{{studentlistarr}}" as="view">
              <student-list-pass-section-card studentname="{{view.student_name}}" 
               id="{{view.enquiry_no}}" admissinno="{{view.admission_no}}" gender="{{view.gender}}" dob="{{view.dob}}"></student-list-pass-section-card>
            </template>
          </div>  

          </div>  
        </table>
      </div>
      <master-ui-service id="uiservice"></master-ui-service>
   </template>
  <script>
  (function() {
    'use strict';
    var studeninfoarr=[];
     var schooltype;
   Polymer({
      is: 'Student-to-section-mapping-card',
    fnstudentgetgrade:function(arr){
     this.setgrade=arr;
    },
    stupersonalinfo:function(arr){
       studeninfoarr=arr;
    },
    passscholtyp:function(value){
      schooltype=value;
    },
   fnemployeename:function(e){
    this.studentclassid=e.target.selectedItem.value;
    alert( this.studentclassid+schooltype);
     this.$.uiservice.fnsetstudentinfo(studeninfoarr,this.studentclassid,schooltype);

    },
   fnselectgrade:function(e){
       this.stugradevalue=e.target.selectedItem.textContent.trim(); 
 
     this.stugradeid=e.target.selectedItem.value;
     //alert(this.stugrade);
     this.$.uiservice.fngetstudent(this.stugradeid,this.stugradevalue);
     this.$.uiservice.FngetStudentpasssection(this.stugradeid,this.stugradevalue);
  
    },
    f1:function(e){
      this.$.uiservice.FngetStudentpasssection(this.stugradeid,this.stugradevalue);
      }
    });
  })();
  </script>
</dom-module>
