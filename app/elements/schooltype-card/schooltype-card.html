
<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="..\..\bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu-light/paper-dropdown-menu-light.html">


<dom-module id="schooltype-card">
  <template>
    <style>
      :host  
      {
         margin-left: 10%;
         display: block;
         @apply(--layout-center);
         /*width: 30%;*/
      }
      .card
      {
         @apply(--layout-center);
        width: 60%;
        margin-top: 3%;
        margin-left: 8%;
      } 
      .headdiv
      {
        margin-left: -5%;
        width: 200%;
      }   

      .title
      {
        @apply(--layout-center);
         
          width: 200%;
          margin-left: 33%;
      }

      /* .creatediv paper-button
      {
      background-color: #363636;
      color: #ffffff;
      width: 7%;
      margin-left: 43%;
      margin-top: 5%;
      }*/
      
      .buttons paper-button
      {
        @apply(--layout-right);
      background-color: #363636;    
      color: #ffffff;
      width: 10%;
      margin-left: 45%;
      margin-top: 9%;
      }

       .school
      {
        margin-top: 3%;
        margin-left:27%;
        width: 50%;
      }

      table
      {
        @apply(--layout-horizontal);
      } 
      .outcardzzzzzzzz 
       {
        /* border-collapse: collapse;
        border: 1px solid #dedede;*/
        width: 65%;
        margin-left: 49%;
        margin-top: 2%;
      }
     
   
      .creatediv
      {
       /* border-radius: 10px;
        border: 1px solid #6699ff;
        padding: 10px;*/
        margin-left: 4%;
        top: 23% !important;
        width: 27%;
      }
     
      .vertical-row 
      {
            /*float: left;*/
            border: 1px  solid #12A5F4;
            height: 100px;
            width: 1px;
            margin-left: 35%;
            min-height: 830px;
            top: 17% !important;
      } 

      </style>

    <div class="title"> 
        <h3><b>SCHOOL TYPE</b></h3>        
    </div>

    
    <div class="outcardzzzzzzzz" hidden$="{{hideoutnewcard}}">
      <div class="newcard">
        <table>
          <tr>
            <th><h4><label style="margin-left: 4%;">Currently Available School Types</label></h4></th>
            <th><paper-icon-button  id="btn1" style="margin-left: -240%;" icon="icons:add" on-click="getschoolname"></paper-icon-button>
                <paper-tooltip for="btn1">Create</paper-tooltip>
            </th>
            <th></th>
          </tr>
          <template is="dom-repeat" items="{{schoolarr}}" as="s">
            <tr><td colspan="3">
              <schooltype-display-card   schooltypename="{{s.school_type_name}}" schooltypeid="{{s.school_type_id}}" hideschooltypenameinput="true" hideschooltypenameitem="false"> 
              </schooltype-display-card>
            </td></tr>
          </template>
        </table>
      </div>
   </div>

        <div class="vertical-row" style="position:fixed;"></div>

      <div class="creatediv" style="position:fixed;" hidden$="{{hideschooltype}}">
        <div class="card">
          <div class="headdiv">
              <h4><label><b>Create New School Type</b></label></h4>
           </div> 
           <paper-input label="School Type Name" id="schooltypename" required error-message="needs School Type name!" value="{{schooltypename}}"  allowed-pattern="[a-zA-Z ]" ></paper-input>
        </div>

        <div class="buttons">
          <paper-button class="popup-btn" on-click="FnSubmit">Submit </paper-button>
        </div>      
      </div>
   
      
    <master-ui-service id="service"></master-ui-service>    

  </template>

  <script>
  (function() 
  {
    'use strict';
     var stypename="";
      Polymer({
      is: 'schooltype-card',
      ready:function()
      {
      
      //  document.GetElementbyId('#')
        //alert("test");
        this.$.service.FnFetchSchooltypename();
        this.$.hidenewschooltypecard=true;
        this.FnRefresh();
        //this.hideoutnewcard=true;

      }, 
     
       FnRefresh:function()
      {
         this.schooltypename="";
            
      },
     
      schooltypehide:function()
      {
        this.hideoutnewcard=true;
  
      },
      schooltypeview:function()
      {
          this.hideoutnewcard=false;
      },

      getschoolname:function()
      {
        this.hideschooltype=false;
      },

      FnSubmit:function()
      {
        if(this.schooltypename==null || this.schooltypename=="")
        {   
          this.$.schooltypename.validate();       
          //alert("Please enter School Type Name before submit");
        }
        else if(this.schooltypename!=null)
        {
          stypename=this.toTitleCase(this.schooltypename);
          var schooltypeid = ((stypename).toLowerCase()).replace(' ','',' ');   
          //alert(schooltypeid);   
          //alert(stypename);
          this.$.service.FnSetSchooltypeInfo(stypename,schooltypeid);        
          document.querySelector('schooltype-card').FnRefresh();
        }
       
        /*else
          {  
        var schooltypeid=(this.schooltypename.replace(" ","")).toLowerCase();
         this.$.service.FnSetSchooltypeInfo(this.schooltypename,schooltypeid);        
        document.querySelector('schooltype-card').FnRefresh();
        this.$.schooldialog.toggle();
        }*/
      },
      toTitleCase:function(str)
      {
        
        return str.replace(/\w\S*/g, 
        function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
      }

    });
  })();
  </script>
</dom-module>
