
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="new-employee-creation-card">
  <template>
    <style>
     :host{
         margin-left: 10%;
        display: block;     
         @apply(--layout-left);
        /*width: 50%;*/   
      }
      .rolecard
      {
         @apply(--layout-center);
        width: 6%;
        margin-left: 10%;
      } 
      /*.subbutton
      {
      background-color: #363636;
      color: #ffffff;
      width: 6%;
      margin-left:30%;
      margin-top: 4%;
      }*/
      /*.button paper-button
      {
      background-color: #363636;
      color: #ffffff;                
      width: 7%;
      margin-left: 80%;
      margin-top: 4%;
      }*/
      .role{
        width: 50%;
         margin-left:25%;
      }
      /*paper-button{
        margin-left: 50%;
        margin-top: 5%;
      }*/
      .card{
        @apply(--layout-horizontal);
              margin-left:30%;
        } 
      .close-icon{
        padding-right: 20px;
      }
      .form-dialog{
        margin:0;
      }
      /* .outercard
      {
        border-radius: 10px;
        border: 2px solid #6699ff;
        padding: 20px;
        margin-top: -45%;
        width: 50%;
        margin-left: 22%;
        min-height: 300px;
      }*/



       #createemp paper-button
      {
      background-color: #363636;
      color: #ffffff;
      width: 7%;
      margin-left: 70%;
      margin-top: 3%;
      }

       table
      {
         margin-top: 3%;
         border-collapse: collapse;
         margin-left: -8%;
         border: 1px solid #dedede;
         width: 530px;
         padding: 10px;
              
      }
      .newcard
       {
         @apply(--layout-horizontal);
       }

      #createemp
       {
          border-radius: 10px;
          border: 1px solid #6699ff;
          padding: 10px;
          min-height: 200px; 
          margin-top: -210%;
          width: 50%;
          margin-left: 44%;
              
       }
       .title
       {
        margin-left: 30%;
       }


       #updateempdetails
       {
        @apply(--layout-horizontal);
        margin-left:30%;
        } 

       #updateempdetails
       {
        border-radius: 10px;
        border: 1px solid #6699ff;
        padding: 10px;
        min-height: 510px;
        margin-top: 2%;
        width: 50%;
        /*margin-left: 110%;*/
       }
       .updateemp paper-button
       {
        background-color: #363636;
        color: #ffffff;
        width: 7%;
        margin-left: 82%;
        margin-top: 3%;
       }


    </style>

    <div class="title">
      <h3><b>EMPLOYEE CREATION</b></h3>
    </div>

    <div class="newcard col-sm-12">
      <table>
        <tr>
          <th><label style="margin-left:3%">Employee ID</label></th>
          <th><label style="margin-left:12%">Employee Name</label></th>
          <th><paper-icon-button icon="add" on-click="getempdetails"></paper-icon-button></th>
        </tr>
        <template is="dom-repeat" items="{{selectschoolpersonalarr}}" as="view">
          <tr>
            <td colspan="6">
              <new-employee-creation-item-card employeeid="{{view.emp_id}}" employeename="{{view.emp_name}}" employeephone="{{view.emp_phone}}"  employeemail="{{view.emp_mail}}" employeeschool="{{view.school_id}}" employeepassword="{{view.emp_password}}" employeemobile="{{view.emp_mobile}}" hiderolenameinput="true" hiderolenameitem="false"></new-employee-creation-item-card>           
            </td>
          </tr>
        </template> 
      </table>
    </div>

    <div class="col-sm-6" id="createemp" hidden$="{{hidecreateemp}}">
      <div class="list-group col-sm-12 panel-body form-category form-dialog">
        <div class="form-group-heading">    
          <h4>Employee Details</h4>
        </div>  

          <paper-input value={{empid}} hidden></paper-input>

        <div class="col-sm-4">
          <paper-input label="Emplyoee name" id="empname" required error-message="needs emplyoee name!" value="{{name}}"  allowed-pattern="[a-zA-Z ]" ></paper-input>
        </div>

        <div class="col-sm-4">
          <paper-input label="Mobile Number" id="empTelephone" required error-message="needs telepnoneno!" value="{{Telephone}}"  allowed-pattern="[0-9]" maxlength="10"></paper-input>
        </div>

        <div class="col-sm-4">
          <paper-input label="Secondry Mobile Number" id="empMobile" required error-message="needs mobileno" value="{{MobileNumber}}" allowed-pattern="[0-9]" maxlength="10"></paper-input>
        </div>

        <div class="col-sm-4">
          <paper-input label="Password" id="emppassword" type="password" required error-message="needs password!" value="{{password}}"></paper-input>
        </div>

        <div class="col-sm-4">
          <gold-email-input label="Emailid" id="empmailid" required error-message="needs mailid!" value="{{mailid}}"></gold-email-input>
        </div>    
      </div>    

      <div class="list-group col-sm-12 panel-body form-category form-dialog">
        <div class="form-group-heading">
          <h4>Emplyoee School Type</h4>
        </div>  

         <div class="col-sm-12">
          <template is="dom-repeat" items="{{selectschooltypearr}}" as="view">
            <employe-schooltype-creation-card empschooltype="{{view.school_type_id}}"></employe-schooltype-creation-card>
         </template>
        </div>
      </div>

      <div class="list-group col-sm-12 panel-body form-category"> 
        <div class="form-group-heading">
          <h4>Employee Role Selection</h4>
        </div>
        <template is="dom-repeat" items="{{selectrolearr}}" as="view">
          <employee-role-item-card emprolename="{{view.role_name}}"></employee-role-item-card>
        </template>

        <span class="subbutton">
          <paper-button on-click="FnSubmit">Submit</paper-button>     
        </span>
      </div>    
    </div>





    <div class="updateempdetails">
     <div class="updateemp" hidden$="{{hideupdateemp}}">
      <div>
        <div class="form-group-heading">
          <h4>employee personal  Details</h4>
        </div>

        <div class="list-group col-sm-12 panel-body form-category">
          <paper-input value={{schoolid}} hidden></paper-input>
            <div class="col-sm-4">
              <paper-input label="Employee Name" value="{{employeename}}"></paper-input>
            </div>
            <div class="col-sm-4">
              <paper-input label="Mobile Number" value="{{employeephone}}"  allowed-pattern="[0-9]"></paper-input>
            </div>
            <div class="col-sm-4">
              <paper-input label=" Secondry Mobile Number" value="{{employeemobile}}" allowed-pattern="[0-9]"></paper-input>
            </div>
        </div> 

        <div class="list-group col-sm-12 panel-body form-category">       
          <div class="col-sm-4">
            <gold-email-input label="Email id" value="{{employeemail}}"></gold-email-input>
          </div>
          <div class="col-sm-4">
            <paper-input label="EmployeePassword"  type="password" value="{{employeepassword}}"></paper-input>
          </div>
        </div>
      </div> 

      <div>
          <div class="form-group-heading">
            <h4>Employee Role Mapping</h4>
          </div>

          <div class="list-group col-sm-12 panel-body form-category">
            <paper-input value={{schoolid}} hidden></paper-input>
              <div class="col-sm-12">
                <template is="dom-repeat" items="{{selectschoolrolearr}}" as="view">
                  <new-employee-creation-role-item-card schoolroleids="{{view.role_name}}" schoolempgetid="{{employeeid}}" schoolempgetname="{{employeename}}" emppsw="{{employeepassword}}" check="{{view.check}}"></new-employee-creation-role-item-card>
                </template>   
              </div>
          </div>  
      </div>

      <iron-ajax          
        id="selectschoolroleajax"
        url="{{selectschoolroleurl}}"
        params="{{selectschoolroleparam}}"
        handle-as="json"
        content-type="application/json"
        method="post"
        on-response="selectschoolroleResponse"
        debounce-duration="300"
    ></iron-ajax>

    <div>
      <div class="form-group-heading">
        <h4>Employee schooltype Mapping</h4>
      </div>

      <div class="list-group col-sm-12 panel-body form-category">
        <paper-input value={{schoolid}} hidden></paper-input>
          <div class="col-sm-12">
            <template is="dom-repeat" items="{{selectmapschooltypearr}}" as="view">
                <new-employee-creation-schooltype-item-card schooltypeids="{{view.school_type_id}}" schoolempschooltypeid="{{employeeid}}" schoolempschooltypename="{{employeename}}" check="{{view.check}}"></new-employee-creation-schooltype-item-card>
            </template>   
          </div>
        </div>
    </div>


      <iron-ajax        
        id="selectschooltypemapajax"
        url="{{selectschooltypemapurl}}"
        params="{{selectschooltypemapparam}}"
        handle-as="json"
        content-type="application/json"
        method="post"
        on-response="selectschooltypemapResponse"
        debounce-duration="300"
      ></iron-ajax>
   
          <div>
            <paper-button class="subbutton" on-click="FnpersonalSave">Submit</paper-button>
          </div>
      </div>                  
    </div>
  </div>  



   
    <master-ui-service id="uiservice"></master-ui-service>
  </template>
  <script>
  (function() {
    'use strict';
   var setrolearr=[];
   var empschooltypearr=[];
    Polymer({
      is: 'new-employee-creation-card',
     ready:function()
     {
      this.hidecreateemp=true;
      this.hideupdateemp=true;
     },  
     setschoolrolezz:function(arr){
          setrolearr=arr;   
          alert(JSON.stringify(setrolearr));
         },
  
    passetschooltype:function(arr){
          empschooltypearr=arr;
       alert(JSON.stringify(empschooltypearr));
       
     },
  
   FnSearch:function(){
    },
       FnRefresh:function()
      {    
       this.name="";
       this.Telephone="";
       this.MobileNumber="";
       this.password="";
       this.mailid="";
      },  
      FnSubmit:function()
      { 
      if(this.name==""||this.Telephone==""||this.MobileNumber==""||this.password==""||this.mailid=="")
      {
              this.$.empname.validate();
              this.$.empTelephone.validate();
              this.$.empMobile.validate();  
              this.$.emppassword.validate();
              this.$.empmailid.validate();
      }
      else  
      {
             this.$.uiservice.fninsetschoolemployeeinfo(this.empid,this.name,this.Telephone,this.MobileNumber,this.password,this.mailid,empschooltypearr,setrolearr);
             this.FnRefresh();
             this.$.uiservice.selectschooltype();
             this.$.uiservice.selectrolename();
             this.$.uiservice.fnschoolemployeepersonal();
             document.querySelector('employee-role-item-card').setschoolroleclean();
             document.querySelector('employe-schooltype-creation-card').empschooltypesplice();
           
            //empschooltypearr=[];
            // setrolearr=[];
             this.$.uiservice.fnempgenerateid();
        }},  

        /*Fncreate:function(){
           this.$.uiservice.selectschooltype();
           this.$.uiservice.selectrolename();
          this.$.roledialog.open();
        },*/
      getempdetails:function(e)
      {
         //  alert("hii");
         this.$.uiservice.selectschooltype();
         this.$.uiservice.selectrolename();
         this.hidecreateemp=false;
         alert(this.hidecreateemp);
         document.getElementId('#hidecreateemp');
      },


      funct1:function(employeename,employeephone,employeemobile,employeemail,employeepassword,schoolid)
      {
        this.employeename=employeename;
        this.employeephone=employeephone;
        this.employeemobile=employeemobile;
        this.employeemail=employeemail;
        this.employeepassword=employeepassword;
        this.schoolid=schoolid;
        

      }
     

 
    });
  })();
  </script>
</dom-module>
